<meta charset="UTF-8">
<script>
    /*## Problema 3: Sistema de Estoque de Produtos com Preço

Contexto: Uma loja pequena precisa gerenciar seu estoque. O sistema deve permitir adicionar produtos, remover, ajustar preços, e gerar relatórios de produtos caros, baratos e com baixo estoque.

### Requisitos:
1. Função para validar entrada: Valide quantidade e preço (use while para re-solicitar dados inválidos).
2. Função para adicionar produto: Adicione nome, quantidade e preço ao array.
3. Função para remover produto: Remova um produto específico do array.
4. Função para listar produtos por faixa de preço: Use for e if...else para filtrar:
    - Produtos baratos (< R$ 50)
    - Produtos médios (R$ 50 a R$ 150)
    - Produtos caros (> R$ 150)
5. Função para alertar sobre estoque baixo: Identifique produtos com quantidade <= 5.
6. Menu interativo: Use while com if...else aninhado para navegação.

Dados Iniciais:

```javascript
let nomeProdutos = ["Arroz", "Feijão", "Açúcar", "Sal"];
let quantidades = [50, 30, 20, 15];
let precos = [3.50, 8.00, 4.50, 2.00];
```

> **DESAFIO:** Crie um sistema robusto que valide todas as entradas, permita manipulação completa do estoque e gere relatórios detalhados.

*/
    // entrada
    let nomeProdutos = ["Arroz", "Feijão", "Açúcar", "Sal"];
    let quantidades = [50, 30, 20, 15];
    let precos = [3.50, 8.00, 4.50, 2.00];

    // função valida entrada
    function validarEntrada(valor) {
        while (isNaN(valor) || valor < 0) {
            valor = Number(prompt(`Valor inválido! Digite novamente:`));
        }
        return valor;
    }

    // função add produto
    function adicionarProduto(nome, quantidade, preco) {
        nomeProdutos.push(nome);
        quantidades.push(quantidade);
        precos.push(preco);

        return `Produto "${nome}" adicionado com sucesso!`;
    }

    // função remove produto
    function removerProduto(nome) {
        let posicao = nomeProdutos.indexOf(nome);

        if (posicao < 0) {
            return `Produto "${nome}" não encontrado!`;
        }

        let removido = nomeProdutos.splice(posicao, 1);
        quantidades.splice(posicao, 1);
        precos.splice(posicao, 1);

        return `Produto "${removido}" removido com sucesso!`;
    }

    // função lista produtos
    function listarPorPreco() {
        let texto = `RELATÓRIO POR PREÇO\n\n`;

        for (let i = 0; i < nomeProdutos.length; i++) {
            let faixaDePreco = "";

            if (precos[i] < 50) {
                faixaDePreco = "BARATO";
            } else if (precos[i] <= 150) {
                faixaDePreco = "MÉDIO";
            } else {
                faixaDePreco = "CARO";
            }

            texto = texto + `${nomeProdutos[i]} - R$ ${precos[i].toFixed(2)} (${faixaDePreco})\n`;
        }
        return texto;
    }

    // função alerta estoque baixo
    function estoqueBaixo() {
        let texto = `ESTOQUE BAIXO (Produtos com menos de 5 itens)\n\n`;
        let lista = "";

        for (let i = 0; i < quantidades.length; i++) {
            if (quantidades[i] <= 5) {
                lista = lista + `${nomeProdutos[i]} - Qtd: ${quantidades[i]}\n`;
            }
        }

        if (lista === "") {
            return texto + `Nenhum produto com estoque baixo.`;
        }

        return texto + lista;
    }


    // menu saída
    let opcao = 1;

    while (opcao !== 0) {
        opcao = Number(prompt(
            `SISTEMA DE ESTOQUE \n\n` +
            `1. Adicionar Produto\n` +
            `2. Remover Produto\n` +
            `3. Listar por Faixa de Preço\n` +
            `4. Verificar Estoque Baixo\n` +
            `0. Sair\n\n` +
            `Escolha uma opção:`
        ));

        if (opcao === 1) {
            let nome = prompt(`Nome do produto:`);
            let qtd = validarEntrada(Number(prompt(`Quantidade:`)));
            let preco = validarEntrada(Number(prompt(`Preço:`)));
            alert(adicionarProduto(nome, qtd, preco));
        } else if (opcao === 2) {
            let nomeRemover = prompt(`Nome do produto a ser removido:`);
            alert(removerProduto(nomeRemover));
        } else if (opcao === 3) {
            alert(listarPorPreco());
        } else if (opcao === 4) {
            alert(estoqueBaixo());
        } else if (opcao === 0) {
            alert(`Sistema finalizado! Saindo.`)
        } else {
            alert(`Opção inválida! Certifique-se de escolher uma opção existente.`)
        }

    }


</script>